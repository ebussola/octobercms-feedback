<form
        data-request="{{ __SELF__ }}::onSend"
        data-request-success="ebussola_feedback_processForm(data)"
        data-request-error="ebussola_feedback_processError(jqXHR.responseJSON)">
    <input type="hidden" name="feedback[channel_id]" value="{{ __SELF__.channel.id }}">

    <div class="form-group">
        <label for="feedback-name">Name</label>
        <input type="text" class="form-control" name="feedback[name]" id="feedback-name" placeholder="Name">
    </div>

    <div class="form-group">
        <label for="feedback-email">Email</label>
        <input type="email" class="form-control" name="feedback[email]" id="feedback-email" placeholder="Email" />
    </div>

    <div class="form-group">
        <label for="feedback-message">Message</label>
        <textarea name="feedback[message]" class="form-control" id="feedback-message"></textarea>
    </div>

    <button type="submit" class="btn btn-default">Submit</button>

</form>

<script>
    function ebussola_feedback_processForm(data) {
        if (data.javascriptAlert != undefined) {
            alert(data.javascriptAlert);
        }
        if (data.customJavascript != undefined) {
            eval(data.customJavascript);
        }
    }

    function ebussola_feedback_processError(data) {
        data = JSON.parse(data.result);

        if (data.javascriptAlert != undefined) {
            $.each(data.javascriptAlert, function(input, messages) {
                messages.map(function(message) {
                    alert(message);
                });
            });
        }

        if (data.customJavascript != undefined) {
            var messages = data.customJavascript.messages;
            eval(data.customJavascript.script);
        }
    }
</script>